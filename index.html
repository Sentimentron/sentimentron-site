<!DOCTYPE html>
<!-- saved from url=(0030)http://www.sentimentron.co.uk/ -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">

	<title>Sentimentron</title>

	<script src="assets/jquery-1.9.1.min.js"></script>

	<link rel="stylesheet" type="text/css" href="./assets/style.css">

	<script>

		// Utility functions
		function chooseRandomElem(of) {
			var length = of.length;
			var rand   = Math.floor((Math.random() * length)-0.00001);
			return of[rand];
		}

	</script>

	<script>

		//
		// This script should be used for RPC testing
		//

		var availabilityTestFiles = [
			"samples/available.json"
		];

		function generateRPCURL(from_url) {
			return "samples/" + from_url;
		}

		function checkAvailability() {
			return chooseRandomElem(availabilityTestFiles);
		}

	</script>

	<script>

		var greetMessages = [
			"I'm ready.", 
			"Hello.",
			"Ready for orders!",
			"Ready.",
			"Here we go."
		];

		var searchBoxExamples = [
			"Barack Obama",
			"washingtonherald.com",
			"theguardian.co.uk",
			"Conservative Party"
		]

		function UI_showCriticalError(text) {
			var errorPane = $("#critical");
			var normalPane = $("#normal");

			normalPane.hide();
			errorPane.show();

			if(text != null) {
				alert(text);
				var messageElem = $("#errorText");
				messageElem.text(text);
			}
		}

		function RPC_checkAvailability() {
			ret = true;
			$.ajax({
				"url": checkAvailability(),
				"dataType": "json",
				"success": function(response) {
					var status = response.status;
					if(status != "normal") {
						// Do something!
					}
				},
				"error": function() {
					UI_showCriticalError("Failed to retrieve service availability.");
					ret = false;
				}
			});
			return ret;
		}

		function UI_getSearchBarExample() {
			item = chooseRandomElem(searchBoxExamples);

			return "e.g. '" + item + "'";
		}

		function UI_registerSearchBarStatus() {
			var searchElem = $("#searchBar");
			var containsUserInput = false;
			var searchElemExample = UI_getSearchBarExample();

			searchElem.ready(function() {
				searchElem.val(searchElemExample);
				searchElem.focusin(function() {
					if(!containsUserInput) {
						searchElem.val('');
						searchElem.css("color", "black");
					}
				});
				searchElem.focusout(function() {
					if(searchElem.val() != '') {
						containsUserInput = true;
					}
					else {
						containsUserInput = false;
					}
					if(!containsUserInput) {
						searchElem.val(searchElemExample);
						searchElem.css("color", "#CCCCCC");
					}
				});
			});
		}

		$(document).ready(function() {

			//
			// Generate the greeting message
			//
			var splashElement = $("#greetingText");
			var splashMessage = chooseRandomElem(greetMessages);
			splashElement.text(splashMessage);

			//
			// Check service availability
			//
			if(!RPC_checkAvailability()) {
				return;
			}

			//
			// Set up text box voodoo
			//
			UI_registerSearchBarStatus();
		});

	</script>

	<style type="text/css">
		#splash {
			text-align: center;
		}

		#searchBar {
			padding: 10px;
			font-size: 20px;
			color: #CCCCCC;
			width:400px;
		}

		#searchSubmit {
			margin: 10px;
			font-size: 20px;
		}
	</style>
</head>

<body>

	<div id="normal">

	<div id="header">

		<img id="logo" src="./assets/Sentimentron.png">

		<p><a href="http://www.sentimentron.co.uk/about.html">About</a></p>
		<p><a href="http://www.sentimentron.co.uk/about.html">Stats</a></p>

		<div id="header-search-form">

			<form>
				<input type="text">
				<img id="search-mag" src="./assets/magnifier.png">
			</form>

		</div>

	</div>

	<div id="splash">

		<h1><span id="greetingText">Ready.</span></h1>
		<div id="searchBox">
			<form>
				<input id="searchBar" type="text" name="q" value="Type a site or keyword" />
				<input id="searchSubmit" type="submit" value="Go &gt;"
			</form>
		</div>
		<p id="subText">Enter some sites and/or keywords you want to know about.</p>
		<img src="./assets/splash.png">
		<p>Thanks for visiting.</p>

	</div>

	<div id="footer">

		<p>Copyright © 2012 Richard Townsend. Sentimentron is a research project, results are automatically generated and may not be accurate. Use of Sentimentron is subject to some <a href="http://www.sentimentron.co.uk/terms.html">Terms of Use</a>.</p>

	</div>
	</div>

	<div id="critical" style="display:none">
		<center><h1>We've got a problem.</h1>
		<p id="errorText">Precise problem details are not available.</p></center>
	</div>

</body></html>